syntax = "proto3";

option go_package = "github.com/i-r-l/sage/back/sageproto";

message Token {
  string access_token = 1;
  string refresh_token = 2;
  string auth_code = 3;
  string identity_token = 4;
}

message User {
  string id = 1;
  Location location = 2;
  string email = 3;
  string name = 5;
  double rating = 6;
  int32 birthday = 7;
  bool is_online = 8;
}

enum LocationProximity {
  NEIGHBORHOOD = 0;
  CITY = 1;
  METRO = 2;
  STATE = 3;
}

message Location {
  string type = 1;
  int32 latitude = 2;
  int32 longitude = 3;
}

message Match {
  User user = 1;
  User other_user = 2;
  Location location = 3;
  int32 created_at = 4;
}

message Criteria {
  int32 age_min = 1;
  int32 age_max = 2;
  LocationProximity proximity = 3;
}

message PresignedUrlRequest {
  string action = 1;
  string file_name = 2;
}

message PresignedUrlResponse {
  string url = 1;
  PresignedUrlRequest request = 2;
}

enum WebRTCRequestType {
  ICE = 0;
  SDP = 1;
}

message WebRTCSignalingRequest {
  WebRTCRequestType type = 7;

  string sdp = 1;
  int32 sdp_type = 2;
  string sdp_description = 3;

  string ice_stream_id = 4;
  int32 ice_line_index = 5;
  string ice_server_url = 6;
}
