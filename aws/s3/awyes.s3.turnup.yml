s3.turnup.reels.s3.create_bucket:
  Bucket: ${S3_REELS_BUCKET_NAME}
  CreateBucketConfiguration:
    LocationConstraint: ${SAGE_REGION}
s3.turnup.reels.bucket_exists.wait:
  Bucket: ${S3_REELS_BUCKET_NAME}
s3.turnup.reels.s3.put_public_access_block:
  Bucket: ${S3_REELS_BUCKET_NAME}
  PublicAccessBlockConfiguration:
    BlockPublicAcls: false
    IgnorePublicAcls: false
    BlockPublicPolicy: false
    RestrictPublicBuckets: false
s3.turnup.reels.s3.put_bucket_policy:
  Bucket: ${S3_REELS_BUCKET_NAME}
  Policy: >
    {
      "Version":"2012-10-17",
      "Statement":[
        {
          "Sid":"PublicRead",
          "Effect":"Allow",
          "Principal": "*",
          "Action":["s3:GetObject"],
          "Resource":["${S3_ARN_PREFIX}${S3_REELS_BUCKET_NAME}/*"]
        }
      ]
    }
---
s3.turnup.reels.dev.s3.create_bucket:
  Bucket: ${S3_REELS_DEV_BUCKET_NAME}
  CreateBucketConfiguration:
    LocationConstraint: ${SAGE_REGION}
s3.turnup.reels.dev.bucket_exists.wait:
  Bucket: ${S3_REELS_DEV_BUCKET_NAME}
s3.turnup.reels.dev.s3.put_public_access_block:
  Bucket: ${S3_REELS_DEV_BUCKET_NAME}
  PublicAccessBlockConfiguration:
    BlockPublicAcls: false
    IgnorePublicAcls: false
    BlockPublicPolicy: false
    RestrictPublicBuckets: false
s3.turnup.reels.dev.s3.put_bucket_policy:
  Bucket: ${S3_REELS_DEV_BUCKET_NAME}
  Policy: >
    {
      "Version":"2012-10-17",
      "Statement":[
        {
          "Sid":"PublicRead",
          "Effect":"Allow",
          "Principal": "*",
          "Action":["s3:GetObject"],
          "Resource":["${S3_ARN_PREFIX}${S3_REELS_DEV_BUCKET_NAME}/*"]
        }
      ]
    }
---
s3.turnup.env.s3.create_bucket:
  Bucket: ${S3_ENV_BUCKET_NAME}
  CreateBucketConfiguration:
    LocationConstraint: ${SAGE_REGION}
s3.turnup.env.bucket_exists.wait:
  Bucket: ${S3_ENV_BUCKET_NAME}
